<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>plausibleAfterBirth • DataQualityDashboard</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="plausibleAfterBirth">
<meta property="og:description" content="DataQualityDashboard">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">DataQualityDashboard</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/DataQualityDashboard.html">Get started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/CheckTypeDescriptions.html">Check Type Definitions</a>
    </li>
    <li>
      <a href="../../articles/Thresholds.html">DQ Check Failure Thresholds</a>
    </li>
    <li>
      <a href="../../articles/CheckStatusDefinitions.html">DQ Check Statuses</a>
    </li>
    <li>
      <a href="../../articles/AddNewCheck.html">Adding a New Data Quality Check</a>
    </li>
    <li>
      <a href="../../articles/DqdForCohorts.html">DQD for Cohorts</a>
    </li>
    <li>
      <a href="../../articles/SqlOnly.html">SQL-only Mode</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    NEW! Data Quality Check Types
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/checkIndex.html">Index</a>
    </li>
    <li>
      <a href="../../articles/checks/cdmTable.html">cdmTable</a>
    </li>
    <li>
      <a href="../../articles/checks/cdmField.html">cdmField</a>
    </li>
    <li>
      <a href="../../articles/checks/cdmDatatype.html">cdmDatatype</a>
    </li>
    <li>
      <a href="../../articles/checks/isPrimaryKey.html">isPrimaryKey</a>
    </li>
    <li>
      <a href="../../articles/checks/isForeignKey.html">isForeignKey</a>
    </li>
    <li>
      <a href="../../articles/checks/isRequired.html">isRequired</a>
    </li>
    <li>
      <a href="../../articles/checks/fkDomain.html">fkDomain</a>
    </li>
    <li>
      <a href="../../articles/checks/fkClass.html">fkClass</a>
    </li>
    <li>
      <a href="../../articles/checks/plausibleAfterBirth.html">plausibleAfterBirth</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/DataQualityDashboard/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>plausibleAfterBirth</h1>
                        <h4 data-toc-skip class="author">Maxim Moinat,
Katy Sadowski</h4>
            
            <h4 data-toc-skip class="date">2024-02-21</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/DataQualityDashboard/blob/HEAD/vignettes/checks/plausibleAfterBirth.Rmd" class="external-link"><code>vignettes/checks/plausibleAfterBirth.Rmd</code></a></small>
      <div class="hidden name"><code>plausibleAfterBirth.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p><strong>Level</strong>: Field check<br><strong>Context</strong>: Verification<br><strong>Category</strong>: Plausibility<br><strong>Subcategory</strong>: Temporal<br><strong>Severity</strong>: Characterization ✔</p>
</div>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>The number and percent of records with a date value in the
<strong>cdmFieldName</strong> field of the <strong>cdmTableName</strong>
table that occurs prior to birth.</p>
</div>
<div class="section level2">
<h2 id="definition">Definition<a class="anchor" aria-label="anchor" href="#definition"></a>
</h2>
<p>This check verifies that events happen after birth. This check is
only run on fields where the <strong>PLAUSIBLE_AFTER_BIRTH</strong>
parameter is set to <strong>Yes</strong>. The birthdate is taken from
the <code>person</code> table, either the <code>birth_datetime</code> or
composed from <code>year_of_birth</code>, <code>month_of_birth</code>,
<code>day_of_birth</code> (taking 1st month/1st day if missing).</p>
<ul>
<li>
<em>Numerator</em>: The number of records with a non-null date value
that happen prior to birth</li>
<li>
<em>Denominator</em>: The total number of records in the table with
a non-null date value</li>
<li>
<em>Related CDM Convention(s)</em>: -Not linked to a
convention-</li>
<li>
<em>CDM Fields/Tables</em>: By default, this check runs on all date
and datetime fields</li>
<li>
<em>Default Threshold Value</em>: 1%</li>
</ul>
</div>
<div class="section level2">
<h2 id="user-guidance">User Guidance<a class="anchor" aria-label="anchor" href="#user-guidance"></a>
</h2>
<p>There might be valid reasons why a record has a date value that
occurs prior to birth. For example, prenatal observations might be
captured or procedures on the mother might be added to the file of the
child. Therefore, some failing records are expected and the default
threshold of 1% accounts for that.</p>
<p>However, if more records violate this check, there might be an issue
with incorrect birthdates or events with a default date. It is
recommended to investigate the records that fail this check to determine
the cause of the error and set proper dates. If it is impossible to fix,
then implement one of these:</p>
<ul>
<li>Aggressive: Remove all patients who have at least one record before
birth (if the birthdate of this patient is unreliable).</li>
<li>Less aggressive: Remove all rows that happen before birth. Probably
this should be chosen as a conventional approach for data clean up (if
the event dates are unreliable).</li>
<li>Conservative: Keep the records as is (if the date is actually valid,
for e.g. prenatal observations).</li>
</ul>
<p>Make sure to clearly document the choices in your ETL
specification.</p>
<div class="section level3">
<h3 id="violated-rows-query">Violated rows query<a class="anchor" aria-label="anchor" href="#violated-rows-query"></a>
</h3>
<p>You may also use the “violated rows” SQL query to inspect the
violating rows and help diagnose the potential root cause of the
issue:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>    p.birth_datetime, </span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>    cdmTable.<span class="op">*</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="kw">FROM</span> @cdmDatabaseSchema.@cdmTableName cdmTable</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="kw">JOIN</span> @cdmDatabaseSchema.person p <span class="kw">ON</span> cdmTable.person_id <span class="op">=</span> p.person_id</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="kw">WHERE</span> cdmTable.@cdmFieldName <span class="op">&lt;</span> p.birth_datetime, </span></code></pre></div>
<p>or, when birth_datetime is missing change to year, month, day
columns:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">SELECT</span> </span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    p.year_of_birth, </span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>    p.month_of_birth, </span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    p.day_of_birth, </span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    cdmTable.<span class="op">*</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="kw">FROM</span> @cdmDatabaseSchema.@cdmTableName cdmTable</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>    <span class="kw">JOIN</span> @cdmDatabaseSchema.person p <span class="kw">ON</span> cdmTable.person_id <span class="op">=</span> p.person_id</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="kw">WHERE</span> cdmTable.@cdmFieldName <span class="op">&lt;</span> <span class="fu">CAST</span>(<span class="fu">CONCAT</span>(</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>        p.year_of_birth,</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>        <span class="fu">COALESCE</span>(</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>            <span class="kw">RIGHT</span>(<span class="st">'0'</span> <span class="op">+</span> <span class="fu">CAST</span>(p.month_of_birth <span class="kw">AS</span> <span class="dt">VARCHAR</span>), <span class="dv">2</span>),</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>            <span class="st">'01'</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>        ),</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>        <span class="fu">COALESCE</span>(</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>            <span class="kw">RIGHT</span>(<span class="st">'0'</span> <span class="op">+</span> <span class="fu">CAST</span>(p.day_of_birth <span class="kw">AS</span> <span class="dt">VARCHAR</span>), <span class="dv">2</span>),</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>            <span class="st">'01'</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>        )</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>    ) <span class="kw">AS</span> <span class="dt">DATE</span>)</span></code></pre></div>
<p>Also, the length of the time interval between these dates might give
you a hint of why the problem appears.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">select</span> </span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>    date_difference, </span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>    <span class="fu">COUNT</span>(<span class="op">*</span>)</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="kw">FROM</span> (</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="kw">SELECT</span> DATEDIFF(</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>        <span class="dt">DAY</span>, </span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>        @cdmFieldName, </span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>        <span class="fu">COALESCE</span>(</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>            <span class="fu">CAST</span>(p.birth_datetime <span class="kw">AS</span> <span class="dt">DATE</span>),</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>            <span class="fu">CAST</span>(<span class="fu">CONCAT</span>(p.year_of_birth,<span class="st">'-01-01'</span>) <span class="kw">AS</span> <span class="dt">DATE</span>))</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>        ) <span class="kw">AS</span> date_difference</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    <span class="kw">FROM</span> @cdmTableName ct</span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>        <span class="kw">JOIN</span> person p <span class="kw">ON</span> ct.person_id <span class="op">=</span> p.person_id </span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>) cte</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="kw">WHERE</span> date_difference <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> date_difference</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">DESC</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>;</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="etl-developers">ETL Developers<a class="anchor" aria-label="anchor" href="#etl-developers"></a>
</h3>
<p>As above, if the number of failing records is high, it is recommended
to investigate the records that fail this check to determine the
underlying cause of the error.</p>
</div>
<div class="section level3">
<h3 id="data-users">Data Users<a class="anchor" aria-label="anchor" href="#data-users"></a>
</h3>
<p>For most studies, violating records will have limited impact on data
use. However, this check should be especially considered for studies
involving neonatals and/or pregnancy.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Katy Sadowski, Clair Blacketer, Ajit Londhe, Anthony Sena, Anthony Molinaro, Frank DeFalco, Pavel Grafkin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
