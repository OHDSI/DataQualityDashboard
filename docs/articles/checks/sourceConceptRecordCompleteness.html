<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>sourceConceptRecordCompleteness • DataQualityDashboard</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="sourceConceptRecordCompleteness">
<meta property="og:description" content="DataQualityDashboard">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">DataQualityDashboard</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.6.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/DataQualityDashboard.html">Get started</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/CheckTypeDescriptions.html">Check Type Definitions</a>
    </li>
    <li>
      <a href="../../articles/Thresholds.html">DQ Check Failure Thresholds</a>
    </li>
    <li>
      <a href="../../articles/CheckStatusDefinitions.html">DQ Check Statuses</a>
    </li>
    <li>
      <a href="../../articles/AddNewCheck.html">Adding a New Data Quality Check</a>
    </li>
    <li>
      <a href="../../articles/DqdForCohorts.html">DQD for Cohorts</a>
    </li>
    <li>
      <a href="../../articles/SqlOnly.html">SQL-only Mode</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    NEW! Data Quality Check Types
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/checkIndex.html">Index</a>
    </li>
    <li>
      <a href="../../articles/checks/cdmTable.html">cdmTable</a>
    </li>
    <li>
      <a href="../../articles/checks/cdmField.html">cdmField</a>
    </li>
    <li>
      <a href="../../articles/checks/cdmDatatype.html">cdmDatatype</a>
    </li>
    <li>
      <a href="../../articles/checks/isPrimaryKey.html">isPrimaryKey</a>
    </li>
    <li>
      <a href="../../articles/checks/isForeignKey.html">isForeignKey</a>
    </li>
    <li>
      <a href="../../articles/checks/isRequired.html">isRequired</a>
    </li>
    <li>
      <a href="../../articles/checks/fkDomain.html">fkDomain</a>
    </li>
    <li>
      <a href="../../articles/checks/fkClass.html">fkClass</a>
    </li>
    <li>
      <a href="../../articles/checks/measurePersonCompleteness.html">measurePersonCompleteness</a>
    </li>
    <li>
      <a href="../../articles/checks/measureValueCompleteness.html">measureValueCompleteness</a>
    </li>
    <li>
      <a href="../../articles/checks/isStandardValidConcept.html">isStandardValidConcept</a>
    </li>
    <li>
      <a href="../../articles/checks/standardConceptRecordCompleteness.html">standardConceptRecordCompleteness</a>
    </li>
    <li>
      <a href="../../articles/checks/sourceConceptRecordCompleteness.html">sourceConceptRecordCompleteness</a>
    </li>
    <li>
      <a href="../../articles/checks/sourceValueCompleteness.html">sourceValueCompleteness</a>
    </li>
    <li>
      <a href="../../articles/checks/plausibleAfterBirth.html">plausibleAfterBirth</a>
    </li>
    <li>
      <a href="../../articles/checks/plausibleBeforeDeath.html">plausibleBeforeDeath</a>
    </li>
    <li>
      <a href="../../articles/checks/plausibleStartBeforeEnd.html">plausibleStartBeforeEnd</a>
    </li>
    <li>
      <a href="../../articles/checks/plausibleValueHigh.html">plausibleValueHigh</a>
    </li>
    <li>
      <a href="../../articles/checks/plausibleValueLow.html">plausibleValueLow</a>
    </li>
    <li>
      <a href="../../articles/checks/withinVisitDates.html">withinVisitDates</a>
    </li>
    <li>
      <a href="../../articles/checks/measureConditionEraCompleteness.html">measureConditionEraCompleteness</a>
    </li>
    <li>
      <a href="../../articles/checks/plausibleUnitConceptIds.html">plausibleUnitConceptIds</a>
    </li>
    <li>
      <a href="../../articles/checks/plausibleGenderUseDescendants.html">plausibleGenderUseDescendants</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
<li>
  <a href="https://github.com/OHDSI/DataQualityDashboard/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>sourceConceptRecordCompleteness</h1>
                        <h4 data-toc-skip class="author">Katy
Sadowski</h4>
            
            <h4 data-toc-skip class="date">2024-12-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/DataQualityDashboard/blob/HEAD/vignettes/checks/sourceConceptRecordCompleteness.Rmd" class="external-link"><code>vignettes/checks/sourceConceptRecordCompleteness.Rmd</code></a></small>
      <div class="hidden name"><code>sourceConceptRecordCompleteness.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p><strong>Level</strong>: FIELD<br><strong>Context</strong>: Verification<br><strong>Category</strong>: Completeness<br><strong>Subcategory</strong>:<br><strong>Severity</strong>: CDM convention ⚠<br></p>
</div>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>The number and percent of records with a value of 0 in the source
concept field <span class="citation">@cdmFieldName</span> in the <span class="citation">@cdmTableName</span> table.</p>
</div>
<div class="section level2">
<h2 id="definition">Definition<a class="anchor" aria-label="anchor" href="#definition"></a>
</h2>
<ul>
<li>
<em>Numerator</em>: The number of rows with a value of 0 in the
<code>_source_concept_id</code> source concept field.<br>
</li>
<li>
<em>Denominator</em>: The total number of rows in the table.</li>
<li>
<em>Related CDM Convention(s)</em>: <a href="https://ohdsi.github.io/CommonDataModel/dataModelConventions.html#Fields" class="external-link">Source
concept mapping</a>
</li>
<li>
<em>CDM Fields/Tables</em>: All source concept ID
(<code>_source_concept_id</code>) columns in all event tables.</li>
<li>
<em>Default Threshold Value</em>:
<ul>
<li>10% for source concept ID columns in condition, drug, measurement,
procedure, device, and observation tables</li>
<li>100% for all other source concept ID columns</li>
</ul>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="user-guidance">User Guidance<a class="anchor" aria-label="anchor" href="#user-guidance"></a>
</h2>
<p>Source concept mapping is an important part of the OMOP concept
mapping process which allows data users insight into the provenance of
the data they are analyzing. It’s important to populate the source
concept ID field for all source values that exist in the OMOP
vocabulary. Failures of this check should be well-understood and
documented so that data users can plan accordingly in the case missing
data might impact their analysis.</p>
<div class="section level3">
<h3 id="etl-developers">ETL Developers<a class="anchor" aria-label="anchor" href="#etl-developers"></a>
</h3>
<p>Recall that the <code>_source_concept_id</code> columns should
contain the OMOP concept representing the exact code used in the source
data for a given record: “If the &lt;_source_value&gt; is coded in the
source data using an OMOP supported vocabulary put the concept id
representing the source value here.”</p>
<p>A failure of this check usually indicates a failure to map a source
value to an OMOP concept. In some cases, such a failure can and should
be remediated in the concept-mapping step of the ETL. In other cases, it
may represent a mapping that currently is not possible to implement.</p>
<p>To investigate the failure, run the following query:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">SELECT</span>  </span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  concept.concept_name <span class="kw">AS</span> standard_concept_name, </span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  cdmTable._concept_id, <span class="co">-- standard concept ID field for the table </span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  c2.concept_name <span class="kw">AS</span> source_value_concept_name, </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  cdmTable._source_value, <span class="co">-- source value field for the table </span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="fu">COUNT</span>(<span class="op">*</span>) </span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="kw">FROM</span> @cdmDatabaseSchema.@cdmTableName cdmTable </span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> @vocabDatabaseSchema.concept <span class="kw">ON</span> concept.concept_id <span class="op">=</span> cdmTable._concept_id </span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co">-- </span><span class="al">WARNING</span><span class="co"> this join may cause fanning if a source value exists in multiple vocabularies </span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> @vocabDatabaseSchema.concept c2 <span class="kw">ON</span> concept.concept_code <span class="op">=</span> cdmTable._source_value </span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="kw">AND</span> c2.domain_id <span class="op">=</span> <span class="op">&lt;</span><span class="kw">Domain</span> <span class="kw">of</span> cdmTable<span class="op">&gt;</span> </span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="kw">WHERE</span> cdmTable.@cdmFieldName <span class="op">=</span> <span class="dv">0</span>  </span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> <span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span> </span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="dv">4</span> <span class="kw">DESC</span> </span></code></pre></div>
<p>The query results will give you a summary of the source codes which
failed to map to an OMOP concept. Inspecting this data should give you
an initial idea of what might be going on.</p>
<p>If source values return legitimate matches on concept_code, it’s
possible that there is an error in the concept mapping step of your ETL.
Please note that while the <code>_source_concept_id</code> fields are
technically not required, it is highly recommended to populate them with
OMOP concepts whenever possible. This will greatly aid analysts in
understanding the provenance of the data.</p>
<p>If source values do NOT return matches on concept_code and you are
NOT handling concept mapping locally for a non-OMOP source vocabulary,
then you likely have a malformed source code or one that does not exist
in the OMOP vocabulary. Please see the documentation in the <a href="standardConceptRecordCompleteness.html">standardConceptRecordCompleteness</a>
page for instructions on how to handle this scenario.</p>
</div>
<div class="section level3">
<h3 id="data-users">Data Users<a class="anchor" aria-label="anchor" href="#data-users"></a>
</h3>
<p>Since most standard OHDSI analytic workflows rely on the standard
concept field and not the source concept field, failures of this check
will not necessarily impact your analysis. However, having the source
concept will give you a better understanding of the provenance of the
code and highlight potential issues where meaning is lost due to mapping
to a standard concept.</p>
<p>Utilize the investigation queries above to understand the scope and
impact of the mapping failures on your specific analytic use case. If
none of the affected codes seem to be relevant for your analysis, it may
be acceptable to ignore the failure. However, since it is not always
possible to understand exactly what a given source value represents, you
should proceed with caution and confirm any findings with your ETL
provider if possible.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Katy Sadowski, Clair Blacketer, Ajit Londhe, Anthony Sena, Anthony Molinaro, Frank DeFalco, Pavel Grafkin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
